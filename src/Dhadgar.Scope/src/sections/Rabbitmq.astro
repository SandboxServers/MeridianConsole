---
// Section 13: RabbitMQ Topology
---

<div class="rounded-2xl border border-white/10 bg-white/5 p-6">
  <h2 class="mb-4 text-2xl font-bold">Section 13: RabbitMQ Topology</h2>

  <h3 class="mb-3 text-lg font-semibold text-indigo-400">Message Broker Overview</h3>
  <p class="mb-4 text-white/70">
    MassTransit abstracts RabbitMQ, providing publish/subscribe, request/response, and saga
    orchestration patterns.
  </p>

  <h3 class="mb-3 text-lg font-semibold text-indigo-400">Exchange Types</h3>
  <table class="scope-table mb-6">
    <thead>
      <tr>
        <th>Exchange</th>
        <th>Type</th>
        <th>Purpose</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>Events</td><td>Fanout</td><td>Broadcast domain events to all subscribers</td></tr>
      <tr><td>Commands</td><td>Direct</td><td>Point-to-point command delivery</td></tr>
      <tr><td>Delayed</td><td>x-delayed-message</td><td>Scheduled/retry messages</td></tr>
    </tbody>
  </table>

  <h3 class="mb-3 text-lg font-semibold text-indigo-400">Key Message Contracts</h3>
  <div class="scope-panel mb-6">
    <ul class="space-y-1 text-white/70">
      <li>- <code>ServerProvisionRequested</code> - Trigger server creation</li>
      <li>- <code>ServerStateChanged</code> - Status update events</li>
      <li>- <code>NodeHealthUpdated</code> - Agent health reports</li>
      <li>- <code>NotificationRequested</code> - Send email/Discord/webhook</li>
    </ul>
  </div>

  <h3 class="mb-3 text-lg font-semibold text-indigo-400">Error Handling</h3>
  <div class="scope-callout">
    Failed messages go to service-specific error queues (_error suffix). Dead letter queues
    (_skipped) capture poison messages after retry exhaustion.
  </div>
</div>

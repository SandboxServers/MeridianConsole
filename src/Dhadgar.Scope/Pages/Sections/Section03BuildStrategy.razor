<section class="scope-prose">

<h3>Environment Structure</h3>
<table class="scope-table">
<thead><tr><th>Environment</th><th>Infrastructure</th><th>Purpose</th></tr></thead>
<tbody>
<tr><td><strong>Dev</strong></td><td>Kubernetes namespace</td><td>Active development, frequent deploys</td></tr>
<tr><td><strong>Staging</strong></td><td>Kubernetes namespace</td><td>Pre-production validation, customer demos</td></tr>
<tr><td><strong>Prod</strong></td><td>Kubernetes namespace (future: dedicated cluster)</td><td>Live customer environment</td></tr>
</tbody>
</table>
<div class="scope-callout">
<p>Local Development:</p>
<p>Developer's choice (Docker Compose, local Kubernetes, etc.). Changes must be validated locally before pushing to dev environment.</p>
</div>
<h3>CI/CD Platform</h3>
<table class="scope-table">
<thead><tr><th>Component</th><th>Technology</th></tr></thead>
<tbody>
<tr><td><strong>CI/CD</strong></td><td>Azure Pipelines</td></tr>
<tr><td><strong>Build Agents</strong></td><td>Self-hosted (pod in cluster)</td></tr>
<tr><td><strong>Container Registry</strong></td><td>Azure Container Registry (ACR)</td></tr>
<tr><td><strong>Artifact Retention</strong></td><td>Forever (ADO doesn't charge for storage)</td></tr>
<tr><td><strong>Package Manager</strong></td><td>Helm</td></tr>
</tbody>
</table>
<h3>GitOps with ArgoCD</h3>
<table class="scope-table">
<thead><tr><th>Aspect</th><th>Implementation</th></tr></thead>
<tbody>
<tr><td><strong>ArgoCD Role</strong></td><td>Read-only, declarative state enforcement</td></tr>
<tr><td><strong>Drift Detection</strong></td><td>Used as deployment gate (staging/prod must match Git exactly)</td></tr>
<tr><td><strong>Source of Truth</strong></td><td>CI/CD pipeline updates Git, ArgoCD syncs to cluster</td></tr>
</tbody>
</table>
<h3>Branching Strategy</h3>
<table class="scope-table">
<thead><tr><th>Branch</th><th>Deploys To</th><th>Trigger</th></tr></thead>
<tbody>
<tr><td><code>develop</code></td><td>Dev</td><td>Automatic on push</td></tr>
<tr><td><code>main</code> (untagged)</td><td>Staging</td><td>Automatic on merge</td></tr>
<tr><td><code>main</code> (tagged)</td><td>Prod</td><td>Manual approval required (ADO Environment Resources)</td></tr>
</tbody>
</table>
<h3>Deployment Gates</h3>
<ul>
<li>• <strong>Dev → Staging:</strong> Unit tests pass, build succeeds</li>
<li>• <strong>Staging → Prod:</strong> Manual approval + ArgoCD drift check (staging must be in sync)</li>
</ul>
<h3>Notifications</h3>
<table class="scope-table">
<thead><tr><th>Event</th><th>Notification Method</th></tr></thead>
<tbody>
<tr><td>Build failures</td><td>Discord webhook to dev channel</td></tr>
<tr><td>Deployment to staging/prod</td><td>Discord webhook to ops channel</td></tr>
<tr><td>Approval required</td><td>Discord webhook + ADO notification</td></tr>
</tbody>
</table>
</section>

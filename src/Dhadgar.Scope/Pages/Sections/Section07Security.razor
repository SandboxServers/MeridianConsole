<MudPaper Class="rounded-2xl border border-white/10 bg-white/5 p-6" Elevation="0">
    <MudText Typo="Typo.h4" Color="Color.Secondary" Class="font-bold mb-6 pb-2" Style="border-bottom: 1px solid rgba(192, 132, 252, 0.3);">
        7. Security Architecture
    </MudText>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Security Philosophy</MudText>
    <MudAlert Severity="Severity.Info" Class="rounded-xl mb-6" Dense="true">
        <MudText Typo="Typo.body1" Class="d-flex align-center gap-2">
            <MudIcon Icon="@Icons.Material.Filled.Lock" Size="Size.Small" />
            <strong>üîê TLS Everywhere, Always, Forever</strong>
        </MudText>
        <MudText Typo="Typo.body2" Class="mt-2" Style="color: rgba(255,255,255,0.7);">
            Every connection, internal or external, is encrypted. No exceptions.
        </MudText>
    </MudAlert>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Transport Security</MudText>
    <MudSimpleTable Dense="true" Hover="true" Class="mb-6 rounded-xl" Style="background: rgba(0,0,0,0.2);">
        <thead>
            <tr style="background: rgba(255,255,255,0.05);">
                <th style="color: white; padding: 12px;">Connection</th>
                <th style="color: white; padding: 12px;">Security</th>
                <th style="color: white; padding: 12px;">TLS Version</th>
            </tr>
        </thead>
        <tbody>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">User ‚Üí Cloudflare</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">TLS</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">1.3 (preferred), 1.2 (minimum)</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Cloudflare ‚Üí Cluster</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">TLS (Full/Strict mode)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">1.2 minimum</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Agent ‚Üî Cluster</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">mTLS (mutual authentication)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">1.2 minimum</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Microservices ‚Üî Microservices</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Cilium mTLS (service mesh)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">1.2 minimum</td></tr>
        </tbody>
    </MudSimpleTable>

    <MudAlert Severity="Severity.Success" Class="rounded-xl mb-6" Dense="true">
        <MudText Typo="Typo.body1"><strong>üîê TLS Version Policy</strong></MudText>
        <MudText Typo="Typo.body2" Class="mt-2" Style="color: rgba(255,255,255,0.7);">
            ‚Ä¢ <strong style="color: white;">Minimum:</strong> TLS 1.2 for all connections<br/>
            ‚Ä¢ <strong style="color: white;">Preferred:</strong> TLS 1.3 where supported<br/>
            ‚Ä¢ <strong style="color: white;">Prohibited:</strong> TLS 1.0, TLS 1.1, SSL 3.0<br/>
            ‚Ä¢ <strong style="color: white;">Cipher Suites:</strong> Modern AEAD ciphers only (AES-GCM, ChaCha20-Poly1305)
        </MudText>
    </MudAlert>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Authentication Layers</MudText>
    <MudSimpleTable Dense="true" Hover="true" Class="mb-6 rounded-xl" Style="background: rgba(0,0,0,0.2);">
        <thead>
            <tr style="background: rgba(255,255,255,0.05);">
                <th style="color: white; padding: 12px;">Actor</th>
                <th style="color: white; padding: 12px;">Method</th>
                <th style="color: white; padding: 12px;">Token Type</th>
            </tr>
        </thead>
        <tbody>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">End Users</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">OAuth (Discord/Steam)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">JWT Bearer</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Node Agents (Bootstrap)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">One-time registration token</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">15-minute expiry</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Node Agents (Registered)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">mTLS client certificate</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">X.509</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">External Webhooks</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Signature verification</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">HMAC/RSA</td></tr>
        </tbody>
    </MudSimpleTable>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Kubernetes Security</MudText>
    <MudText Typo="Typo.body1" Class="mb-6" Style="color: rgba(255,255,255,0.7);">
        ‚Ä¢ <strong style="color: white;">CNI:</strong> Cilium (network policy enforcement, mTLS between pods)<br/>
        ‚Ä¢ <strong style="color: white;">RBAC:</strong> Least-privilege service accounts per microservice<br/>
        ‚Ä¢ <strong style="color: white;">Secrets:</strong> Azure Key Vault + CSI driver (no secrets in etcd)<br/>
        ‚Ä¢ <strong style="color: white;">Pod Security:</strong> Restricted PSS baseline<br/>
        ‚Ä¢ <strong style="color: white;">Network Policies:</strong> Default deny, explicit allow per service
    </MudText>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Secret Management</MudText>
    <MudText Typo="Typo.body1" Class="mb-6" Style="color: rgba(255,255,255,0.7);">
        ‚Ä¢ All secrets stored in Azure Key Vault<br/>
        ‚Ä¢ CSI Secret Store driver mounts secrets as volumes<br/>
        ‚Ä¢ Automatic rotation via Secrets Service (:5110)<br/>
        ‚Ä¢ Secret access logged and auditable
    </MudText>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Network Boundaries</MudText>
    <MudText Typo="Typo.body1" Style="color: rgba(255,255,255,0.7);">
        ‚Ä¢ <strong style="color: white;">Edge:</strong> Cloudflare (WAF, DDoS protection)<br/>
        ‚Ä¢ <strong style="color: white;">Perimeter:</strong> UniFi Hardware Firewall (stateful inspection)<br/>
        ‚Ä¢ <strong style="color: white;">Internal:</strong> Cilium (pod-to-pod encryption, L3/L4 policies)<br/>
        ‚Ä¢ <strong style="color: white;">Data:</strong> Encrypted at rest (PostgreSQL, Redis), encrypted in transit
    </MudText>
</MudPaper>

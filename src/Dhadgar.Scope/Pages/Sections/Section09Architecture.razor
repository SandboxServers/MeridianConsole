@using Dhadgar.Scope.Shared

<section id="architecture" class="bg-gray-800 rounded-xl p-6 border border-indigo-700">
    <h2 class="text-2xl font-bold text-purple-400 mb-6 border-b border-purple-600 pb-2">
        9. System Architecture
    </h2>

    <h3 class="text-xl font-semibold text-indigo-400 mb-3">Architecture Overview</h3>
    <div class="rounded-2xl border border-white/10 bg-white/5 p-5 mb-6">
        <div class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between">
            <div>
                <div class="text-xl font-semibold text-indigo-300">Architecture explorer</div>
                <p class="mt-2 text-sm text-white/70">
                    Browse the system architecture in a structured, readable tree view.
                </p>
            </div>
        </div>
    </div>
    <div class="rounded-2xl border border-white/10 bg-black/20 p-4 mb-6">
        <ArchitectureTreeView />
    </div>
<details class="rounded-2xl border border-white/10 bg-black/20 p-4 mb-6">
    <summary class="cursor-pointer select-none text-sm font-semibold text-white/80">
        Show the original ASCII â€œsoulâ€ diagram
    </summary>
    <div class="mt-4">
        <div class="bg-gray-900 border border-gray-600 rounded-lg p-4 mb-6 font-mono text-xs overflow-x-auto">
        <pre class="text-gray-300">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              INTERNET                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚      New Relic (SaaS)     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Outbound Telemetry (APM, metrics, logs, traces)   â”‚    â”‚
â”‚   â”‚                           â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                      â”‚
â”‚                                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                               CUSTOMER NODE AGENTS                                           â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚     â”‚   Agent.Linux       â”‚              â”‚   Agent.Windows     â”‚                            â”‚   â”‚
â”‚   â”‚     â”‚   (Customer sites)  â”‚              â”‚   (Customer sites)  â”‚                            â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                               â”‚                                                      â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                               â”‚         CLOUDFLARE            â”‚                                     â”‚
â”‚                               â”‚     WAF Â· CDN Â· DDoS Prot     â”‚                                     â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                               â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     COLO BOUNDARY (AS396426)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚      UniFi Hardware Firewall      â”‚
                              â”‚           (UDM Pro)               â”‚
                              â”‚   â€¢ Stateful inspection           â”‚
                              â”‚   â€¢ Dynamic game port forwarding  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    K8S CLUSTER                                                        â”‚
â”‚                                                                                                       â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚                              â”‚         INGRESS CONTROLLER        â”‚                                   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                â”‚                                                      â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                     â”‚                                                     â”‚                           â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚           â”‚  Web App :5200    â”‚                             â”‚     Gateway :5000         â”‚            â”‚
â”‚           â”‚  (Blazor WASM)    â”‚                             â”‚        (YARP)             â”‚            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                           â”‚                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                    CONTROL PLANE SERVICES (12)                                 â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚ Identity   â”‚ â”‚  Billing   â”‚ â”‚  Servers   â”‚ â”‚   Nodes    â”‚ â”‚   Tasks    â”‚ â”‚   Files    â”‚    â”‚  â”‚
â”‚   â”‚  â”‚   :5010    â”‚ â”‚   :5020    â”‚ â”‚   :5030    â”‚ â”‚   :5040    â”‚ â”‚   :5050    â”‚ â”‚   :5060    â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚  Console   â”‚ â”‚   Mods     â”‚ â”‚   Notifs   â”‚ â”‚  Firewall  â”‚ â”‚  Secrets   â”‚ â”‚  Discord   â”‚    â”‚  â”‚
â”‚   â”‚  â”‚   :5070    â”‚ â”‚   :5080    â”‚ â”‚   :5090    â”‚ â”‚   :5100    â”‚ â”‚   :5110    â”‚ â”‚   :5120    â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                â”‚                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                                    INFRASTRUCTURE LAYER                                          â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚   â”‚  â”‚  Platform DB Pod (PostgreSQL)â”‚  â”‚  User DB Pod (PostgreSQL)   â”‚  â”‚      RabbitMQ          â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚                        â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ identity_db               â”‚  â”‚  â€¢ Customer game databases  â”‚  â”‚  Events & Commands     â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ billing_db                â”‚  â”‚  â€¢ Tenant data              â”‚  â”‚                        â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ servers_db                â”‚  â”‚                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ nodes_db                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚â”‚
â”‚   â”‚  â”‚  â€¢ tasks_db                  â”‚                                                               â”‚â”‚
â”‚   â”‚  â”‚  â€¢ files_db                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚   â”‚  â”‚  â€¢ mods_db                   â”‚  â”‚         Redis                â”‚  â”‚     Cilium             â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ notifications_db          â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ firewall_db               â”‚  â”‚  â€¢ Session tokens           â”‚  â”‚  â€¢ CNI                 â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ secrets_db                â”‚  â”‚  â€¢ Rate limiting            â”‚  â”‚  â€¢ Service mesh        â”‚ â”‚â”‚
â”‚   â”‚  â”‚                              â”‚  â”‚  â€¢ Server status cache      â”‚  â”‚  â€¢ Pod-to-pod mTLS     â”‚ â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â€¢ Distributed locks        â”‚  â”‚  â€¢ Network policies    â”‚ â”‚â”‚
â”‚   â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚   â”‚  â”‚                              INTERNAL OBSERVABILITY                                       â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”‚  Prometheus  â”‚â”€â”€â”€â–ºâ”‚   Grafana    â”‚    â”‚     Loki     â”‚                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”‚  (metrics)   â”‚    â”‚ (dashboards) â”‚â—„â”€â”€â”€â”‚    (logs)    â”‚                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                â”‚                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                                    DOGFOOD AGENTS (Internal)                                     â”‚â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚â”‚
â”‚   â”‚     â”‚   Agent.Linux       â”‚              â”‚   Agent.Windows     â”‚                                â”‚â”‚
â”‚   â”‚     â”‚   (Internal test)   â”‚              â”‚   (Internal test)   â”‚                                â”‚â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        </pre>
    </div>
        </div>
    </details>

    <h3 class="text-xl font-semibold text-indigo-400 mb-3">Control Plane Services (12)</h3>
    <table class="w-full text-sm border-collapse mb-6">
        <thead>
            <tr class="bg-gray-700 text-white">
                <th class="border border-gray-600 p-2 text-left">Service</th>
                <th class="border border-gray-600 p-2 text-left">Port</th>
                <th class="border border-gray-600 p-2 text-left">Responsibility</th>
            </tr>
        </thead>
        <tbody class="text-gray-300">
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Identity</td><td class="border border-gray-600 p-2">:5010</td><td class="border border-gray-600 p-2">User authentication, OAuth (Discord/Steam), JWT issuance</td></tr>
            <tr><td class="border border-gray-600 p-2">Billing</td><td class="border border-gray-600 p-2">:5020</td><td class="border border-gray-600 p-2">Subscriptions, payments (Stripe/PayPal), usage tracking</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Servers</td><td class="border border-gray-600 p-2">:5030</td><td class="border border-gray-600 p-2">Server CRUD, state management, configuration</td></tr>
            <tr><td class="border border-gray-600 p-2">Nodes</td><td class="border border-gray-600 p-2">:5040</td><td class="border border-gray-600 p-2">Agent registration, heartbeat, certificate issuance</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Tasks</td><td class="border border-gray-600 p-2">:5050</td><td class="border border-gray-600 p-2">Job queue, provisioning, async operations</td></tr>
            <tr><td class="border border-gray-600 p-2">Files</td><td class="border border-gray-600 p-2">:5060</td><td class="border border-gray-600 p-2">File storage, backups, uploads/downloads</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Console</td><td class="border border-gray-600 p-2">:5070</td><td class="border border-gray-600 p-2">WebSocket console streaming (xterm.js), RCON relay</td></tr>
            <tr><td class="border border-gray-600 p-2">Mods</td><td class="border border-gray-600 p-2">:5080</td><td class="border border-gray-600 p-2">Mod management (Steam Workshop, CurseForge, Modrinth)</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Notifications</td><td class="border border-gray-600 p-2">:5090</td><td class="border border-gray-600 p-2">Email, push notifications, customer alerts</td></tr>
            <tr><td class="border border-gray-600 p-2">Firewall</td><td class="border border-gray-600 p-2">:5100</td><td class="border border-gray-600 p-2">Port allocation, UniFi API integration</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Secrets</td><td class="border border-gray-600 p-2">:5110</td><td class="border border-gray-600 p-2">Secret rotation, Azure Key Vault sync</td></tr>
            <tr><td class="border border-gray-600 p-2">Discord</td><td class="border border-gray-600 p-2">:5120</td><td class="border border-gray-600 p-2">Internal team bot (NOT customer-facing)</td></tr>
        </tbody>
    </table>

    <h3 class="text-xl font-semibold text-indigo-400 mb-3">Database Architecture</h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div class="bg-blue-900/30 border border-blue-700 rounded-lg p-4">
            <p class="text-blue-400 font-semibold mb-2">ğŸ“¦ Platform DB Pod</p>
            <p class="text-gray-300 text-sm mb-2">All microservice databases. NO customer data.</p>
            <ul class="text-gray-400 text-xs space-y-1">
                <li>â€¢ identity_db, billing_db, servers_db</li>
                <li>â€¢ nodes_db, tasks_db, files_db</li>
                <li>â€¢ mods_db, notifications_db</li>
                <li>â€¢ firewall_db, secrets_db</li>
            </ul>
        </div>
        <div class="bg-green-900/30 border border-green-700 rounded-lg p-4">
            <p class="text-green-400 font-semibold mb-2">ğŸ‘¤ User DB Pod</p>
            <p class="text-gray-300 text-sm mb-2">Customer-created databases ONLY.</p>
            <ul class="text-gray-400 text-xs space-y-1">
                <li>â€¢ Game server databases (per customer)</li>
                <li>â€¢ Tenant-specific data</li>
                <li>â€¢ Complete isolation from platform DBs</li>
            </ul>
        </div>
    </div>

    <h3 class="text-xl font-semibold text-indigo-400 mb-3">Agent Types</h3>
    <table class="w-full text-sm border-collapse mb-6">
        <thead>
            <tr class="bg-gray-700 text-white">
                <th class="border border-gray-600 p-2 text-left">Type</th>
                <th class="border border-gray-600 p-2 text-left">Location</th>
                <th class="border border-gray-600 p-2 text-left">Network Path</th>
                <th class="border border-gray-600 p-2 text-left">Purpose</th>
            </tr>
        </thead>
        <tbody class="text-gray-300">
            <tr class="bg-gray-800">
                <td class="border border-gray-600 p-2"><strong class="text-orange-400">Customer Agent</strong></td>
                <td class="border border-gray-600 p-2">Internet (anywhere)</td>
                <td class="border border-gray-600 p-2">Internet â†’ Cloudflare â†’ UniFi â†’ Gateway â†’ Services</td>
                <td class="border border-gray-600 p-2">Production customer gameservers</td>
            </tr>
            <tr>
                <td class="border border-gray-600 p-2"><strong class="text-cyan-400">Dogfood Agent</strong></td>
                <td class="border border-gray-600 p-2">Inside colo</td>
                <td class="border border-gray-600 p-2">Internal network â†’ Services (direct)</td>
                <td class="border border-gray-600 p-2">Internal testing, validation</td>
            </tr>
        </tbody>
    </table>

    <h3 class="text-xl font-semibold text-indigo-400 mb-3">Observability Stack</h3>
    <table class="w-full text-sm border-collapse">
        <thead>
            <tr class="bg-gray-700 text-white">
                <th class="border border-gray-600 p-2 text-left">Layer</th>
                <th class="border border-gray-600 p-2 text-left">Tool</th>
                <th class="border border-gray-600 p-2 text-left">Location</th>
                <th class="border border-gray-600 p-2 text-left">Purpose</th>
            </tr>
        </thead>
        <tbody class="text-gray-300">
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">APM</td><td class="border border-gray-600 p-2">New Relic</td><td class="border border-gray-600 p-2">SaaS (external)</td><td class="border border-gray-600 p-2">Traces, APM, primary dashboards</td></tr>
            <tr><td class="border border-gray-600 p-2">Metrics</td><td class="border border-gray-600 p-2">Prometheus</td><td class="border border-gray-600 p-2">In-cluster</td><td class="border border-gray-600 p-2">Internal metrics scraping</td></tr>
            <tr class="bg-gray-800"><td class="border border-gray-600 p-2">Dashboards</td><td class="border border-gray-600 p-2">Grafana</td><td class="border border-gray-600 p-2">In-cluster</td><td class="border border-gray-600 p-2">Internal visualization</td></tr>
            <tr><td class="border border-gray-600 p-2">Logs</td><td class="border border-gray-600 p-2">Loki</td><td class="border border-gray-600 p-2">In-cluster</td><td class="border border-gray-600 p-2">Log aggregation</td></tr>
        </tbody>
    </table>
</section>

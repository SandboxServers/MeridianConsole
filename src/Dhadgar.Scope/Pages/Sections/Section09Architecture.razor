@using Dhadgar.Scope.Shared

<MudPaper Class="rounded-2xl border border-white/10 bg-white/5 p-6" Elevation="0">
    <MudText Typo="Typo.h4" Color="Color.Secondary" Class="font-bold mb-6 pb-2" Style="border-bottom: 1px solid rgba(192, 132, 252, 0.3);">
        9. System Architecture
    </MudText>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Architecture Overview</MudText>
    <MudPaper Class="rounded-2xl border border-white/10 bg-white/5 p-5 mb-6" Elevation="0">
        <MudText Typo="Typo.h6" Color="Color.Info" Class="mb-2">Architecture explorer</MudText>
        <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.7);">
            Browse the system architecture in a structured, readable tree view.
        </MudText>
    </MudPaper>
    <MudPaper Class="rounded-2xl border border-white/10 bg-black/20 p-4 mb-6" Elevation="0">
        <ArchitectureTreeView />
    </MudPaper>

    <MudExpansionPanels Class="mb-6">
        <MudExpansionPanel Text="Show the original ASCII &quot;soul&quot; diagram" Dense="true" Style="background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.1); border-radius: 1rem;">
            <MudText Typo="Typo.body2" Class="font-mono text-xs" Style="color: rgba(255,255,255,0.7); white-space: pre; overflow-x: auto;">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                              INTERNET                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚      New Relic (SaaS)     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Outbound Telemetry (APM, metrics, logs, traces)   â”‚    â”‚
â”‚   â”‚                           â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                                      â”‚
â”‚                                                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                               CUSTOMER NODE AGENTS                                           â”‚   â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚   â”‚
â”‚   â”‚     â”‚   Agent.Linux       â”‚              â”‚   Agent.Windows     â”‚                            â”‚   â”‚
â”‚   â”‚     â”‚   (Customer sites)  â”‚              â”‚   (Customer sites)  â”‚                            â”‚   â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                               â”‚                                                      â”‚
â”‚                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                               â”‚         CLOUDFLARE            â”‚                                     â”‚
â”‚                               â”‚     WAF Â· CDN Â· DDoS Prot     â”‚                                     â”‚
â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                                               â”‚                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                     COLO BOUNDARY (AS396426)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                                â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚      UniFi Hardware Firewall      â”‚
                              â”‚           (UDM Pro)               â”‚
                              â”‚   â€¢ Stateful inspection           â”‚
                              â”‚   â€¢ Dynamic game port forwarding  â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    K8S CLUSTER                                                        â”‚
â”‚                                                                                                       â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚                              â”‚         INGRESS CONTROLLER        â”‚                                   â”‚
â”‚                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                â”‚                                                      â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                     â”‚                                                     â”‚                           â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚           â”‚  Web App :5200    â”‚                             â”‚     Gateway :5000         â”‚            â”‚
â”‚           â”‚  (Blazor WASM)    â”‚                             â”‚        (YARP)             â”‚            â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                           â”‚                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                                    CONTROL PLANE SERVICES (12)                                 â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚ Identity   â”‚ â”‚  Billing   â”‚ â”‚  Servers   â”‚ â”‚   Nodes    â”‚ â”‚   Tasks    â”‚ â”‚   Files    â”‚    â”‚  â”‚
â”‚   â”‚  â”‚   :5010    â”‚ â”‚   :5020    â”‚ â”‚   :5030    â”‚ â”‚   :5040    â”‚ â”‚   :5050    â”‚ â”‚   :5060    â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚   â”‚  â”‚  Console   â”‚ â”‚   Mods     â”‚ â”‚   Notifs   â”‚ â”‚  Firewall  â”‚ â”‚  Secrets   â”‚ â”‚  Discord   â”‚    â”‚  â”‚
â”‚   â”‚  â”‚   :5070    â”‚ â”‚   :5080    â”‚ â”‚   :5090    â”‚ â”‚   :5100    â”‚ â”‚   :5110    â”‚ â”‚   :5120    â”‚    â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚   â”‚                                                                                                â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                â”‚                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                                    INFRASTRUCTURE LAYER                                          â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚   â”‚  â”‚  Platform DB Pod (PostgreSQL)â”‚  â”‚  User DB Pod (PostgreSQL)   â”‚  â”‚      RabbitMQ          â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚                        â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ identity_db               â”‚  â”‚  â€¢ Customer game databases  â”‚  â”‚  Events & Commands     â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ billing_db                â”‚  â”‚  â€¢ Tenant data              â”‚  â”‚                        â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ servers_db                â”‚  â”‚                             â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ nodes_db                  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚â”‚
â”‚   â”‚  â”‚  â€¢ tasks_db                  â”‚                                                               â”‚â”‚
â”‚   â”‚  â”‚  â€¢ files_db                  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚   â”‚  â”‚  â€¢ mods_db                   â”‚  â”‚         Redis                â”‚  â”‚     Cilium             â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ notifications_db          â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ firewall_db               â”‚  â”‚  â€¢ Session tokens           â”‚  â”‚  â€¢ CNI                 â”‚ â”‚â”‚
â”‚   â”‚  â”‚  â€¢ secrets_db                â”‚  â”‚  â€¢ Rate limiting            â”‚  â”‚  â€¢ Service mesh        â”‚ â”‚â”‚
â”‚   â”‚  â”‚                              â”‚  â”‚  â€¢ Server status cache      â”‚  â”‚  â€¢ Pod-to-pod mTLS     â”‚ â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â€¢ Distributed locks        â”‚  â”‚  â€¢ Network policies    â”‚ â”‚â”‚
â”‚   â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚   â”‚  â”‚                              INTERNAL OBSERVABILITY                                       â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”‚  Prometheus  â”‚â”€â”€â”€â–ºâ”‚   Grafana    â”‚    â”‚     Loki     â”‚                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â”‚  (metrics)   â”‚    â”‚ (dashboards) â”‚â—„â”€â”€â”€â”‚    (logs)    â”‚                                â”‚   â”‚â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚   â”‚â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚   â”‚                                                                                                  â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                â”‚                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚   â”‚                                    DOGFOOD AGENTS (Internal)                                     â”‚â”‚
â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚â”‚
â”‚   â”‚     â”‚   Agent.Linux       â”‚              â”‚   Agent.Windows     â”‚                                â”‚â”‚
â”‚   â”‚     â”‚   (Internal test)   â”‚              â”‚   (Internal test)   â”‚                                â”‚â”‚
â”‚   â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</MudText>
        </MudExpansionPanel>
    </MudExpansionPanels>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Control Plane Services (12)</MudText>
    <MudSimpleTable Dense="true" Hover="true" Class="mb-6 rounded-xl" Style="background: rgba(0,0,0,0.2);">
        <thead>
            <tr style="background: rgba(255,255,255,0.05);">
                <th style="color: white; padding: 12px;">Service</th>
                <th style="color: white; padding: 12px;">Port</th>
                <th style="color: white; padding: 12px;">Responsibility</th>
            </tr>
        </thead>
        <tbody>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Identity</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5010</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">User authentication, OAuth (Discord/Steam), JWT issuance</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Billing</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5020</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Subscriptions, payments (Stripe/PayPal), usage tracking</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Servers</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5030</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Server CRUD, state management, configuration</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Nodes</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5040</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Agent registration, heartbeat, certificate issuance</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Tasks</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5050</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Job queue, provisioning, async operations</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Files</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5060</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">File storage, backups, uploads/downloads</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Console</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5070</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">WebSocket console streaming (xterm.js), RCON relay</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Mods</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5080</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Mod management (Steam Workshop, CurseForge, Modrinth)</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Notifications</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5090</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Email, push notifications, customer alerts</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Firewall</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5100</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Port allocation, UniFi API integration</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Secrets</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5110</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Secret rotation, Azure Key Vault sync</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Discord</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">:5120</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Internal team bot (NOT customer-facing)</td></tr>
        </tbody>
    </MudSimpleTable>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Database Architecture</MudText>
    <MudGrid Class="mb-6">
        <MudItem xs="12" md="6">
            <MudPaper Class="rounded-xl p-4" Style="background: rgba(29, 78, 216, 0.15); border: 1px solid rgba(59, 130, 246, 0.4);">
                <MudText Typo="Typo.body1" Style="color: rgba(59, 130, 246, 1);"><strong>ğŸ“¦ Platform DB Pod</strong></MudText>
                <MudText Typo="Typo.body2" Class="mt-2 mb-2" Style="color: rgba(255,255,255,0.7);">
                    All microservice databases. NO customer data.
                </MudText>
                <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.6); font-size: 0.85rem;">
                    â€¢ identity_db, billing_db, servers_db<br/>
                    â€¢ nodes_db, tasks_db, files_db<br/>
                    â€¢ mods_db, notifications_db<br/>
                    â€¢ firewall_db, secrets_db
                </MudText>
            </MudPaper>
        </MudItem>
        <MudItem xs="12" md="6">
            <MudPaper Class="rounded-xl p-4" Style="background: rgba(16, 185, 129, 0.15); border: 1px solid rgba(16, 185, 129, 0.4);">
                <MudText Typo="Typo.body1" Style="color: rgba(16, 185, 129, 1);"><strong>ğŸ‘¤ User DB Pod</strong></MudText>
                <MudText Typo="Typo.body2" Class="mt-2 mb-2" Style="color: rgba(255,255,255,0.7);">
                    Customer-created databases ONLY.
                </MudText>
                <MudText Typo="Typo.body2" Style="color: rgba(255,255,255,0.6); font-size: 0.85rem;">
                    â€¢ Game server databases (per customer)<br/>
                    â€¢ Tenant-specific data<br/>
                    â€¢ Complete isolation from platform DBs
                </MudText>
            </MudPaper>
        </MudItem>
    </MudGrid>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Agent Types</MudText>
    <MudSimpleTable Dense="true" Hover="true" Class="mb-6 rounded-xl" Style="background: rgba(0,0,0,0.2);">
        <thead>
            <tr style="background: rgba(255,255,255,0.05);">
                <th style="color: white; padding: 12px;">Type</th>
                <th style="color: white; padding: 12px;">Location</th>
                <th style="color: white; padding: 12px;">Network Path</th>
                <th style="color: white; padding: 12px;">Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="padding: 12px;"><strong style="color: rgba(251, 146, 60, 1);">Customer Agent</strong></td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Internet (anywhere)</td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Internet â†’ Cloudflare â†’ UniFi â†’ Gateway â†’ Services</td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Production customer gameservers</td>
            </tr>
            <tr>
                <td style="padding: 12px;"><strong style="color: rgba(34, 211, 238, 1);">Dogfood Agent</strong></td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Inside colo</td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Internal network â†’ Services (direct)</td>
                <td style="color: rgba(255,255,255,0.8); padding: 12px;">Internal testing, validation</td>
            </tr>
        </tbody>
    </MudSimpleTable>

    <MudText Typo="Typo.h6" Color="Color.Primary" Class="mb-3">Observability Stack</MudText>
    <MudSimpleTable Dense="true" Hover="true" Class="rounded-xl" Style="background: rgba(0,0,0,0.2);">
        <thead>
            <tr style="background: rgba(255,255,255,0.05);">
                <th style="color: white; padding: 12px;">Layer</th>
                <th style="color: white; padding: 12px;">Tool</th>
                <th style="color: white; padding: 12px;">Location</th>
                <th style="color: white; padding: 12px;">Purpose</th>
            </tr>
        </thead>
        <tbody>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">APM</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">New Relic</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">SaaS (external)</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Traces, APM, primary dashboards</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Metrics</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Prometheus</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">In-cluster</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Internal metrics scraping</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Dashboards</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Grafana</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">In-cluster</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Internal visualization</td></tr>
            <tr><td style="color: rgba(255,255,255,0.8); padding: 12px;">Logs</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Loki</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">In-cluster</td><td style="color: rgba(255,255,255,0.8); padding: 12px;">Log aggregation</td></tr>
        </tbody>
    </MudSimpleTable>
</MudPaper>

name: dhadgar-dev-agents

services:
  azdo-agent:
    image: mcr.microsoft.com/azure-pipelines/vsts-agent:latest
    restart: unless-stopped
    environment:
      VSTS_ACCOUNT: ${VSTS_ACCOUNT}
      VSTS_TOKEN: ${VSTS_TOKEN}
      VSTS_POOL: ${VSTS_POOL:-Default}
      VSTS_WORK: /azp/agent/_work
      # Leave VSTS_AGENT unset when scaling
    volumes:
      - azp-agent-work:/azp/agent/_work
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - dhadgar-dev

volumes:
  azp-agent-work:

networks:
  dhadgar-dev:
    external: true
    name: dhadgar-dev_default

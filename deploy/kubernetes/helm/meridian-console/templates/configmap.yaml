apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "meridian.fullname" . }}-config
  labels:
    {{- include "meridian.labels" . | nindent 4 }}
data:
  # ASP.NET Core environment
  ASPNETCORE_ENVIRONMENT: {{ .Values.config.aspNetCoreEnvironment | quote }}

  # Logging configuration (JSON format for ASP.NET Core)
  Logging__LogLevel__Default: {{ .Values.config.logging.logLevel.default | quote }}
  Logging__LogLevel__Microsoft: {{ .Values.config.logging.logLevel.microsoft | quote }}
  Logging__LogLevel__Microsoft.AspNetCore: {{ .Values.config.logging.logLevel.microsoftAspNetCore | quote }}

  # RabbitMQ host (non-sensitive)
  RabbitMq__Host: {{ include "meridian.rabbitmqHost" . | quote }}

  # JWT issuer and audience (non-sensitive)
  Auth__Issuer: {{ .Values.secrets.jwtIssuer | quote }}
  Auth__Audience: {{ .Values.secrets.jwtAudience | quote }}
